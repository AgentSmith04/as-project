<div class="admin-panel">
  <h2>Panel de Administrador</h2>
  <button (click)="addUser()">Agregar usuario</button>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Correo</th>
        <th>Rol</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users$ | async">
        <td>{{ user.id }}</td>
        <td>
          <span *ngIf="!editMode || currentUser.id !== user.id">{{ user.name }}</span>
          <input *ngIf="editMode && currentUser.id === user.id" [(ngModel)]="currentUser.name" />
        </td>
        <td>
          <span *ngIf="!editMode || currentUser.id !== user.id">{{ user.email }}</span>
          <input *ngIf="editMode && currentUser.id === user.id" [(ngModel)]="currentUser.email" />
        </td>
        <td>
          <span *ngIf="!editMode || currentUser.id !== user.id">{{ user.role }}</span>
          <input *ngIf="editMode && currentUser.id === user.id" [(ngModel)]="currentUser.role" />
        </td>
        <td>
          <ng-container *ngIf="!editMode || currentUser.id !== user.id">
            <button (click)="editUser(user)">Editar</button>
            <button (click)="deleteUser(user.id)">Eliminar</button>
          </ng-container>
          <ng-container *ngIf="editMode && currentUser.id === user.id">
            <button (click)="saveUser()">Guardar</button>
            <button (click)="cancelEdit()">Cancelar</button>
          </ng-container>
        </td>
      </tr>
    </tbody>
  </table>
</div>
